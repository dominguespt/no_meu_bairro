<div class="container">
  <div class="row justify-content-center">
    <div class="col-sm-16 col-lg-6">
      <div class="mt-3">
        <h1><%= @service.name %></h1>
      </div>
      <% if @service.photos.attached?%>
        <div id="carouselExampleControls" class="carousel slide mb-3" data-ride="carousel">
          <div class="carousel-inner">
            <div class="carousel-item active">
              <%= cl_image_tag @service.photos.key, crop: :fill, class: "d-block w-100", alt: "First slide" %>
            </div>
            <div class="carousel-item">
              <%= cl_image_tag @service.photos.key, crop: :fill, class: "d-block w-100", alt: "Second slide" %>
            </div>
            <div class="carousel-item">
              <%= cl_image_tag @service.photos.key, crop: :fill, class: "d-block w-100", alt: "Third slide" %>
            </div>
          </div>
          <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      <% end %>
      <div class="mt-2">
        <p type="button" data-toggle="modal" data-target="#exampleModalCenter"><strong><i class="fas fa-map-marker-alt mr-2"></strong></i> <%= @service.address %> <strong>(view in map)</strong></p>
        <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
              <div class="modal-body">
                <div id="map"
                     style="width: 100%; height: 300px;"
                     data-markers="<%= @markers.to_json %>"
                     data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
                </div>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-outline-primary" data-dismiss="modal">Close</button>
              </div>
            </div>
          </div>
        </div>
        <p style="color: #F6830F"><strong><%= @service.category %></strong></p>
        <p class="mt-5"><%= @service.description %></p>
      </div>

      <div>
        <% if current_user == @service.user %>
          <%= link_to edit_neighbourhood_service_path(@neighbourhood, @service) do %>
            <p>Edit Service</p>
          <% end %>
        <% end %>
      </div>
      <div class="mt-4">
        <% if current_user != @service.user %>
          <%= render 'reviews/new' %>
        <% end %>
      </div>
      <div class="mt-4">
        <%= render 'reviews/show' %>
      </div>
      <div class="mt-4 center-buttons">
        <%= link_to neighbourhood_path(@neighbourhood) do %>
          <i class="fas fa-arrow-left m-5" style="font-size: 30px"></i>
        <% end %>
      </div>
    </div>
  </div>
</div>



<%= render 'components/footer' %>

<script>
  function reloadPage() {
  // The last "domLoading" Time //
  var currentDocumentTimestamp =
  new Date(performance.timing.domLoading).getTime();
  // Current Time //
  var now = Date.now();
  // Ten Seconds //
  var tenSec = 1000;
  // Plus Ten Seconds //
  var plusTenSec = currentDocumentTimestamp + tenSec;
  if (now > plusTenSec) {
  location.reload();
  } else {}
  }
  reloadPage();
</script>
